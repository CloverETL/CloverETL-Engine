<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<TITLE>Creating custom function for Transform Language</TITLE>
</HEAD>
<H1>Creating custom function for Transform Language</H1>
<P><I>by Agata Vackova 05/26/10</I></P>
<P>To create custom tl function you have to create java object, that
extends <i>org.jetel.interpreter.extensions.TLFunctionLibrary</i>. This is
the library, where you define custom functions. Each function must
extend <i>org.jetel.interpreter.extensions.TLFunctionPrototype</i>. <I>trans</I>
directory contains example of such library (<A HREF="trans/src/org/mypackage/ctlfunctions/MyCTLFunctionsLib.java">MyCTLFunctionsLib.java</A>).
There are implemented two custom functions in the file: <I>my_function</I>
and <I>double_metaphone</I>.
<I>my_function</I> does
nothing in principle - it just illustrates how to create simple
function. <I>double_metaphone</I>
function encodes a given word using the Double Metaphone algorithm;
it requires external library (<i>commons-codec-1.4.jar</i>), that is placed
in <i>lib</i> directory.  <BR>Along with the custom functions code, you also
need to define the custom functions plugin (<A HREF="trans/plugin.xml">trans/plugin.xml</A>).
 This file must contain plugin id (<I>org.mypackage.ctlfunctions</I>),
paths needed during runtime and extension points. Each <I>exetension
point-id</I>
must be equal to <I>tlfunction</I>
and contains parameters:</P>
<UL>
	<LI>libraryName - name of your library (<I>MyCTLFunctions</I>)
	<LI>className - qualified library name 
	(<I>org.mypackage.ctlfunctions.MyCTLFunctionsLib</I>)
	<LI>function - list of implemented functions
</UL>
<P>Now
you can install the plugin to CloverETL Engine. Your library needs to
be compiled, packed to jar file and placed with the <i>plugin.xml</i> file
to CloverETL Engine's plugins directory. This task can be done by the
<i>build.xml</i> file placed in project's root directory. All you need is to
set proper CloverETL Engine's path in <I>build.properties</I>
file and run the default task (<i>install</i>). The ant task compiles the example library, packs the class
files to the  <I>my_lib.jar</I>
and copies the jar and <i>plugin.xml</i> to the CloverETL Engine's plugins
directory. 
</P>
</BODY>
</HTML>