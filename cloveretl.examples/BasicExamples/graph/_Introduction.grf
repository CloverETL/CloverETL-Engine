<?xml version="1.0" encoding="UTF-8"?>
<Graph author="Pavel" created="Thu Oct 04 11:41:15 CEST 2012" guiVersion="4.1.1.devel" id="1349357018755" licenseCode="Commercial Devel" licenseType="Commercial" modified="Wed Jan 13 11:01:02 CET 2016" modifiedBy="jansedlacek" name="graphIntroduction" revision="1.36" showComponentDetails="true">
<Global>
<Metadata id="Metadata0" previewAttachment="${DATAIN_DIR}/delimited/addressbook.csv" previewAttachmentCharset="ISO-8859-1">
<Record fieldDelimiter="," label="addressbook.csv" name="addressbook_csv" previewAttachment="${DATAIN_DIR}/delimited/addressbook.csv" previewAttachmentCharset="ISO-8859-1" quoteChar="both" quotedStrings="false" recordDelimiter="\n" skipSourceRows="1" type="delimited">
<Field name="firstname" type="string"/>
<Field name="lastname" type="string"/>
<Field name="address" type="string"/>
<Field name="city" type="string"/>
<Field name="zip" type="string"/>
<Field name="email" type="string"/>
<Field name="phone" type="string"/>
<Field eofAsDelimiter="false" name="fax" type="string"/>
</Record>
</Metadata>
<Metadata id="Metadata1" previewAttachmentCharset="ISO-8859-1">
<Record fieldDelimiter="|" name="addressbook_short" previewAttachmentCharset="ISO-8859-1" recordDelimiter="\r\n" type="delimited">
<Field name="name" type="string"/>
<Field name="city" type="string"/>
<Field name="email" type="string"/>
<Field name="phone" type="string"/>
</Record>
</Metadata>
<GraphParameters>
<GraphParameterFile fileURL="workspace.prm"/>
</GraphParameters>
<RichTextNote backgroundColorB="96" backgroundColorG="255" backgroundColorR="96" folded="false" height="80" id="Note2" width="989" x="30" y="56">
<attr name="text"><![CDATA[h3. Welcome to CloverETL
This simple example [reads|element://READ_FILE] a [CSV text file|open://BasicExamples/data-in/addressbook.csv], performs some basic transformations on it, and [outputs|element://WRITE_AS_EXCEL] the result into an Excel spreadsheet.]]></attr>
</RichTextNote>
<RichTextNote backgroundColorB="255" backgroundColorG="255" backgroundColorR="255" folded="false" height="109" id="Note3" width="239" x="780" y="152">
<attr name="text"><![CDATA[h4. See results in Navigator
[Project: "BasicExamples"|navigator://BasicExamples/data-out/addressbook_short.xlsx]

[data-out/addressbook_short.xlsx|open://BasicExamples/data-out/addressbook_short.xlsx]]]></attr>
</RichTextNote>
<RichTextNote backgroundColorB="192" backgroundColorG="192" backgroundColorR="192" folded="false" height="236" id="Note4" width="989" x="30" y="267">
<attr name="text"><![CDATA[h3. Transformation graph in a nutshell

Data flows from *Readers* (green), through *Transformers* (yellow) into *Writers* (blue). Check the Palette to the right to see what's available.

*Edges* between components have metadata assigned to them - a sort of description for the data. _Double-click_ any edge to see its metadata. Metadata help components to work with the data - readers use it to parse data, transformation components use it for configuring keys, mappings etc. and writers take metadata into accout when formatting the output.

Notice the small bugs on the edges - these indicate that debug mode is on for those edges. You can check [Data Inspector|view://com.clovertetl.gui.debugDataView] view to see what data came through the edge. But, you need to run the transformation first. Warning - always turn debug mode off when moving to production - it's a priceless help for development but kills performance in production.]]></attr>
</RichTextNote>
<RichTextNote backgroundColorB="225" backgroundColorG="255" backgroundColorR="255" folded="false" height="213" id="Note0" width="419" x="30" y="508">
<attr name="text"><![CDATA[h3. Where to go next?
You can check other examples that show


- [Joining and Aggregating|open://BasicExamples/graph/JoiningAggregating.grf]
- [Accessing a Database|open://BasicExamples/graph/DatabaseAccess.grf]
- [Processing of a JSON files|open://BasicExamples/graph/JSONProcessing.grf]

or start creating your own project using File → New → CloverETL Project]]></attr>
</RichTextNote>
<Dictionary/>
</Global>
<Phase number="0">
<Node enabled="enabled" fileURL="${DATAIN_DIR}/addressbook.csv" guiName="Read file" guiX="30" guiY="152" id="READ_FILE" quotedStrings="true" type="DATA_READER">
<attr name="guiDescription"><![CDATA[CSV data]]></attr>
</Node>
<Node enabled="enabled" guiName="Reformat" guiX="437" guiY="152" id="REFORMAT1" type="REFORMAT">
<attr name="transform"><![CDATA[//#CTL2

// Transforms input record into output record.
function integer transform() {
	$out.0.name = $in.0.firstname+' '+$in.0.lastname;
	$out.0.city = $in.0.city;
	$out.0.email = $in.0.email;
	$out.0.phone = $in.0.phone;

	return 0;
}

// Called during component initialization.
// function boolean init() {}

// Called during each graph run before the transform is executed. May be used to allocate and initialize resources
// required by the transform. All resources allocated within this method should be released
// by the postExecute() method.
// function void preExecute() {}

// Called only if transform() throws an exception.
// function integer transformOnError(string errorMessage, string stackTrace) {}

// Called during each graph run after the entire transform was executed. Should be used to free any resources
// allocated within the preExecute() method.
// function void postExecute() {}

// Called to return a user-defined error message when an error occurs.
// function string getMessage() {}
]]></attr>
<attr name="guiDescription"><![CDATA[Select only some fields, concatenate name]]></attr>
</Node>
<Node enabled="enabled" guiName="Sort by city, name" guiX="228" guiY="152" id="SORT_BY_CITY_NAME" sortKey="city(a);lastname(a)" type="FAST_SORT">
<attr name="guiDescription"><![CDATA[Simple ascending sort by two fields]]></attr>
</Node>
<Node enabled="enabled" existingSheetsActions="DO_NOTHING" fileURL="${DATAOUT_DIR}/addressbook_short.xlsx" guiName="Write as Excel" guiX="642" guiY="152" id="WRITE_AS_EXCEL" sheet="Sheet0" templateFileURL="${DATAIN_DIR}/templates/addressbook_template.xlsx" type="SPREADSHEET_WRITER" writeMode="OVERWRITE_SHEET_IN_MEMORY">
<attr name="mapping"><![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<mapping>
    <globalAttributes>
        <orientation>VERTICAL</orientation>
        <step>1</step>
        <writeHeader>false</writeHeader>
    </globalAttributes>
    <defaultSkip>0</defaultSkip>
    <headerGroups>
        <headerGroup skip="0">
            <cloverField>name</cloverField>
            <headerRanges>
                <headerRange begin="A3"/>
            </headerRanges>
        </headerGroup>
        <headerGroup skip="0">
            <cloverField>city</cloverField>
            <headerRanges>
                <headerRange begin="B3"/>
            </headerRanges>
        </headerGroup>
        <headerGroup skip="0">
            <cloverField>email</cloverField>
            <headerRanges>
                <headerRange begin="C3"/>
            </headerRanges>
        </headerGroup>
        <headerGroup skip="0">
            <cloverField>phone</cloverField>
            <headerRanges>
                <headerRange begin="D3"/>
            </headerRanges>
        </headerGroup>
    </headerGroups>
</mapping>
]]></attr>
<attr name="guiDescription"><![CDATA[Use default behavior]]></attr>
</Node>
<Edge debugMode="true" fromNode="READ_FILE:0" guiBendpoints="" guiLocks="null|null|null" guiRouter="Manhattan" id="Edge6" inPort="Port 0 (in)" metadata="Metadata0" outPort="Port 0 (output)" toNode="SORT_BY_CITY_NAME:0"/>
<Edge debugMode="true" fromNode="REFORMAT1:0" guiBendpoints="" guiRouter="Manhattan" id="Edge3" inPort="Port 0 (input)" metadata="Metadata1" outPort="Port 0 (out)" toNode="WRITE_AS_EXCEL:0"/>
<Edge debugMode="false" fromNode="SORT_BY_CITY_NAME:0" guiBendpoints="" guiRouter="Manhattan" id="Edge2" inPort="Port 0 (in)" outPort="Port 0 (out)" persistedImplicitMetadata="Metadata0" toNode="REFORMAT1:0"/>
</Phase>
</Graph>
